%labels
AUTHOR estabroj@ohsu.edu

Bootstrap: docker

From: continuumio/miniconda3:4.6.14

%files
    deseq2.yml

%environment
    PATH=/opt/conda/envs/$(head -1 deseq2.yml | cut -d' ' -f2)/bin:$PATH

%post
    echo ". /opt/conda/etc/profile.d/conda.sh" >> ~/.bashrc
    echo "source activate $(head -1 deseq2.yml | cut -d' ' -f2)" > ~/.bashrc
    /opt/conda/bin/conda env create -f deseq2.yml

%runscript
    exec "$@"